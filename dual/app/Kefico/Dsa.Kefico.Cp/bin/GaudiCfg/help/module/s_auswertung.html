<HTML>
<HEAD>
<TITLE>S_AUSWERTUNG</TITLE>
<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">

<table BORDER=0 COLS=1 WIDTH="100%" BGCOLOR="#FFFFCC" NOSAVE >
<tr ALIGN=CENTER VALIGN=CENTER NOSAVE>
<td NOSAVE><font face="Arial,Helvetica"><font size=+2></font></font>
<br><font face="Arial,Helvetica"><font size=+2>CCS Modul &nbsp;&nbsp;<b>S_AUSWERTUNG</b></font></font>
<br>&nbsp;</td>
</tr>
</table>
<PRE>
   $Id: s_auswertung.C,v 1.8 2005/04/01 07:37:46 lehmann Exp $
   ---------------------------------------------------------------------
   Kurzbeschreibung: 	Auswertemodul fuer Messergebnisse
   ---------------------------------------------------------------------
   Projekt:		TS2000
   Sourcefile:		s_auswertung.C
   Autor:		ursprünglich RtW/TEF72-Juilfs (20.11.95)
			aus Source m_auswertung übernommen.
			Änderungen für RUNIN
   Zielsystem:		HP9000/V743 (HP-RT 2.0x), /Sxxx (HP-UX 9.0x)
   Sprache:		C++
   ---------------------------------------------------------------------
   Prototyp:
   MPI Schnittstelle
   void s_auswertung(shm_stringpointer *zeilen_info
   ,shm_stringpointer   *zeilen_wert
   ,long index1
   ,long anzahl)
   
   ---------------------------------------------------------------------
   Aufruf: im Vectorinterpreter
   
   (*funktionen[modulnummer])
   (Ssp_expand_zeile
   ,Ssp_expand_wert
   ,p_verwaltung-&gt;begin_modulblock
   ,p_verwaltung-&gt;anzahl_modulparameter);
   
   
   
   
   
   ---------------------------------------------------------------------
   Funktionsbeschreibung:
   
   Aufgabe des Modules ist es, MeÞergebnisse die per &amp;-Variablen 
   Ïbergeben werden, zu ÏberprÏfen ob sie in der Toleranz liegen.
   Danach werden die MeÞergebnisse, sowie die Ïbrigen Parameter an den
   Prozess Messdatensammler weitergereicht.
   
   Änderung gegenüber m_auswertung:
	Zentrales Errorflag wird nicht gesetzt, statt dessen wird Fehler
	über Parameter MG_FEHLER zurückgemeldet.
   
   

   Ûbergabeparameter

   MD,M_AUSWERTUNG</pre><b><a name="param1">1</a> PRUEFSCHRITT</b><pre></pre><b><a name="param2">2</a> POSITION</b><pre>	Sollte statt einer Positionsnummer der String "KEIN_AUSDRUCK"
	stehen, so wird eine Auswertung des MeÞergebnisses vorgenommen,
	und das Ergebniss der Bewertung in einer Globalen Varibalen
	abgelegt, auf die man mit der Funktion M_ZUWEIS
	zugreifen kann.
	Funktion :MODUL_ERROR</pre><b><a name="param3">3</a> MESSWERT</b><pre>   	Variable aus MeÞmodul
   	&amp;MEWE</pre><b><a name="param4">4</a> Modulname</b><pre>   	Text fÏr Druckerstring
	Es wird Ïber eine Variable $MO das MeÞobjekt Ïbergeben</pre><b><a name="param5">5</a> Messungsnummer</b><pre>   	Integernummer</pre><b><a name="param6">6</a> Abweichungsart</b><pre>          Diese Variable stellt den Abweichungsmode dar. Wird diese Variable
	  besetzt wird der Ûbergabeparameter TUG als SOLLWERT angesehen, und der
          Ûbergabeparameter TOG als ABWEICHUNG. Mit Hilfe des Parameters
	  ABWEICHUNGSART ist es mÎglich, die Abweichungsart zu bestimmen.

          %           TUG=S-TOL%  TOG=S+TOL% 
          ABSOLUT     TUG=S-TOL   TOG=S+TOL  
          %+          TUG=S       TOG=S+TOL% 
          %-          TUG=S-TOL%  TOG=S      
          ABSOLUT+    TUG=S       TOG=S+TOL  
          ABSOLUT-    TUG=S-TOL   TOG=S</pre><b><a name="param7">7</a> Statistik</b><pre></pre><b><a name="param8">8</a> Klass_typ</b><pre></pre><b><a name="param9">9</a> FehlerArt</b><pre></pre><b><a name="param10">10</a> Dimension</b><pre>   	V,MV,MS,S,OHM,KOHM,MOHM,A,MA:
		Ist die Variable Dimension mit einer dieser Dimensionen 
		besetzt, so wird tug, tog und mewe als float behandelt.
	HEX:	Die Werte werden als hexadezimale Integerwerte behandelt
		und ausgegeben.
	HEXI:	Wie HEX, jedoch werden die Bytes vertauscht. Aus 00FF wird 
		FF00.
	BIN:	Bitweise Auswertung von hexadezimalen Werten.
		MESSWERT = 00 .. FF also 8 Bit. 
		In TUG wird ein binÌrer Wert erwartet z.B. TUG = 0101XX01
		Hierbei ist X eine Wildcard. D.h. das Bit wird nicht geprÏft.
	STR:	Bedeutet String. Es wird der im MESSWERT gelieferte String 
		ausgegeben. Er wird NICHT auf tug/tog verglichen. 		
		Die Messung kann mit der Variabeln MG_FEHLER != 0 schlecht  
		gemacht werden.
	STRCMP:	Bedeutet String. Es wird der im MESSWERT gelieferte String 
		mit dem String in TUG verglichen. Ist der String &lt;&gt; TUG, so
		wird die Messung schlecht gemacht.
		Die Messung kann auserdem mit der Variabeln MG_FEHLER != 0 schlecht  
		gemacht werden.
	DEZ:	Dezimalzahlen	
	-       Keine Dimension bedeutet kein Daten zum Messdatensammer
	ZEIT:   Bei Firstrun wird der Mittelwert von Tug und Tog berechnet.</pre><b><a name="param11">11</a> TUG</b><pre>oder Sollwert</pre><b><a name="param12">12</a> TOG</b><pre>oder Abweichungswert
   
   Ûbergabeparameter fÏr Abgleich</pre><b><a name="param13">13</a> Abgleichstelle</b><pre></pre><b><a name="param14">14</a> DimWiderstand</b><pre></pre><b><a name="param15">15</a> DimSteigung</b><pre></pre><b><a name="param16">16</a> Vorwiderstand</b><pre></pre><b><a name="param17">17</a> Vorsteigung</b><pre></pre><b><a name="param18">18</a> AktWiderstand</b><pre></pre><b><a name="param19">19</a> AktSteigung</b><pre></pre><b><a name="param20">20</a> AnzIterationen</b><pre></pre><b><a name="param21">21</a> ExxWiderstand</b><pre></pre><b><a name="param22">22</a> MG_FEHLER</b><pre>   	0 	Die Messung wird als Gut beendet, wenn die Auswerung des
		Messwertes keinen Grund zur Beanstandung gibt.
	!=0	Die Messung wird auf jeden Fall als schlecht beendet.</pre><b><a name="param23">23</a> NIO_AUSDRUCK</b><pre>   	NEIN	sollte das MeÞergebnis falsch sein,
		so wird der Ausdruck unterdrÏckt
	
	
	
	
	
	
	
   Offsetverarbeitung: 
   Es kann sein, das vom Messergebnis noch ein Offset abgezogen werden muÞ.
   In diesem Fall muÞ vor dem Aufruf des Modules M_AUSWERTUNG das Modul
   M_ZUWEIS aufgerufen werden. In diesem Modul wird der Offsetwert 
   eingegeben. Der Variablenname muÞ mit &amp;G_OFFSETMAKRO definiert sein.
   
   
	
	
	
	
	
   ...

   Revision 1.1  2001/12/18 10:47:48  sgc3sa
   Anpassungen fuer Linux und QT

   Revision 1.2  2001/01/18 12:40:56  KLM3SA
   keine Protokollausgabe

   Revision 1.1  2000/09/18 09:40:20  KLM3SA
   Kopie von m_auswertung
   Änderung gegenüber m_auswertung:
   	Zentrales Errorflag wird nicht gesetzt, statt dessen wird Fehler
   	über Parameter MG_FEHLER zurückgemeldet.

   Revision 1.21  2000/06/15 07:05:24  PIJ3SA
   Bugfix; Zeile 336; Abweichungsmode
   von ABSOLUT+ auf  ABSOLUT- korrigiert

   Revision 1.20  2000/02/16 12:17:53  klm3sa
   *** empty log message ***

   Revision 1.19  1999/12/22 10:07:15  keppler
   $ID -&gt; $Id

   Revision 1.18  1999/12/22 09:17:52  keppler
   $Header -&gt; $Id

   Revision 1.17  1999/12/07 11:46:36  keppler
   fuer CCS-Version 3.0

Revision 1.16  99/08/25  15:18:56  15:18:56  juilfs (Joerg Juilfs)
Neue Dimensionen eingefuehrt

Revision 1.15  99/05/06  17:02:25  17:02:25  wiese (Stefan Wiese)
*** empty log message ***

Revision 1.14  99/05/05  16:11:13  16:11:13  juilfs (Joerg Juilfs)
NIO - AUSDRUCK, Diverses

Revision 1.13  99/04/07  15:46:26  15:46:26  keppler (Fritz Keppler)
Abfrage auf DIMENSION_MEWE = "0" return

Revision 1.12  99/03/23  16:10:56  16:10:56  juilfs (Joerg Juilfs)
no entry

Revision 1.11  99/03/23  16:13:08  16:13:08  keppler (Fritz Keppler)
no entry

Revision 1.10  99/02/02  15:43:47  15:43:47  keppler (Fritz Keppler)
Doku erweitert

Revision 1.9  99/02/01  16:34:09  16:34:09  keppler (Fritz Keppler)
Fehler bei falschem Hexstring

Revision 1.8  99/02/01  16:30:33  16:30:33  juilfs (Joerg Juilfs)
Auswerten der Zeit eingebaut

Revision 1.7  99/01/11  14:27:18  14:27:18  juilfs (Joerg Juilfs)
Dimension ZEIT eingefÏhrt

Revision 1.6  99/01/11  13:35:37  13:35:37  wiese (Stefan Wiese)
*** empty log message ***

Revision 1.5  98/12/22  16:41:45  16:41:45  wiese (Stefan Wiese)
Auswertung der STR_toul bei RÏstlauf nicht

Revision 1.4  98/12/15  15:16:09  15:16:09  keppler (Fritz Keppler)
errormessage eingebaut

Revision 1.3  98/12/03  13:36:25  13:36:25  keppler (Fritz Keppler)
Bug fix tug/tog 0000

Revision 1.2  98/11/27  16:47:23  16:47:23  wiese (Stefan Wiese)
str_toul fÏr die Wandlung von HEX - Werten

Revision 1.1  98/11/26  10:52:05  10:52:05  keppler (Fritz Keppler)
Initial revision

Revision 1.5  98/02/03  17:47:55  17:47:55  keppler (Fritz Keppler)
Alle Messungsnummern durfen auch schlecht sein

Revision 1.4  98/02/03  17:22:25  17:22:25  juilfs (Joerg Juilfs)
G_OFFEST fÏr Realazhlen (besetzt aus M_zuweis oder so)

Revision 1.3  98/01/08  19:28:23  19:28:23  juilfs (Joerg Juilfs)
no entry

Revision 1.2  97/10/20  11:24:09  11:24:09  wiese (Stefan Wiese)
HEX auf 8 Stellen erweitert

Revision 1.1  97/10/20  11:20:46  11:20:46  wiese (Stefan Wiese)
Initial revision

Revision 1.2  96/10/23  15:37:43  15:37:43  wiese (Stefan Wiese)
//Statistik vollauswertung:
Ssp_vi-&gt;test.sd_daten.statmod auf "2" setzen

Revision 1.1  96/10/21  14:18:09  14:18:09  wiese (Stefan Wiese)
Initial revision

   ---------------------------------------------------------------------


</PRE>
</BODY>
</HTML>
