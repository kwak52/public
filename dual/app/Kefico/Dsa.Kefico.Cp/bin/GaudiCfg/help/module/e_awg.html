<HTML>
<HEAD>
<TITLE>E_AWG</TITLE>
<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">

<table BORDER=0 COLS=1 WIDTH="100%" BGCOLOR="#FFFFCC" NOSAVE >
<tr ALIGN=CENTER VALIGN=CENTER NOSAVE>
<td NOSAVE><font face="Arial,Helvetica"><font size=+2></font></font>
<br><font face="Arial,Helvetica"><font size=+2>CCS Modul &nbsp;&nbsp;<b>E_AWG</b></font></font>
<br>&nbsp;</td>
</tr>
</table>
<PRE>
 *
 * Revision 1.1  2001/12/18 10:52:19  sgc3sa
 * Anpassungen fuer Linux und QT
 *
 * Revision 1.5  2001/06/19 14:42:58  lehmann
 * Linux ändeungen
 *
 * Revision 1.4  2000/02/16 12:15:28  klm3sa
 * *** empty log message ***
 *
 * Revision 1.3  1999/12/22 10:06:01  keppler
 * $ID -&gt; $Id
 *
 * Revision 1.2  1999/12/22 09:12:30  keppler
 * $Header -&gt; $Id
 *
 * Revision 1.1  1999/12/20 15:47:02  juilfs
 * Init
 *
 * Revision 1.1  1999/11/23 14:23:40  katzenma
 * Initial Version by Sniff
 *                                                 
 Revision 1.0  1999/05/05  mr/SSE (M.Riethmueller)          
 Erstellt                                                   

 Includes                              
 !! changed code will be overwritten!! 
-- pragmas -----------------------------------------------------------
#pragma  COPYRIGHT "Robert Bosch GmbH Salzgitter, SaW/TEF7.2"
#pragma  VERSIONID "$Id: e_awg.C,v 1.4 2004/03/23 15:53:45 lehmann Exp $"

-- defines -----------------------------------------------------------
#define HEADER "$Id: e_awg.C,v 1.4 2004/03/23 15:53:45 lehmann Exp $" 
#define EXTERN  extern  Bei allen Subroutinen 

-- includes ----------------------------------------------------------
//#include "unit_nummern.H"
#include "shm_syscom.H"

#include "ccl_defines.H"
#include "libccs.H"
#include "libtestmodul_pool.H"

#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;


-- external functions / variables ------------------------------------
extern  struct Pruefprogramm_verwaltung  *Ssp_pp_verwaltung;


-- global variables (nur im  "main" erlaubt) -------------------------


 locale variables 
static const unsigned short PRUEFSCHRITT   =  1;
static const unsigned short POSITION       =  2;
static const unsigned short ANSTEUER_UNIT  =  3;


 &lt;userdoc&gt;                                                           
    Funktionsbeschreibung:                                           
    Index der expandierten Pruefliste, und der Name der              
    anzusteuerenden Unit werden ermittelt und via Message-Queue      
    an den Prozess AWG uebermittelt.                                 
                                                                     
    Beschreibung der Moduluebergabeparameter:</pre><b><a name="param1">1</a> PRUEFSCHRITT</b><pre>                                                 
         GAUDI Pruefschritt                                          
    ------------------------------</pre><b><a name="param2">2</a> POSITION</b><pre>                                                     
         PAV- Position                                               
    ------------------------------</pre><b><a name="param3">3</a> ANSTEUER_UNIT</b><pre>                                                
         z.B.: GEN_AMPL1_1 (siehe aktuelles HW-Config-File)          
    ------------------------------</pre><b><a name="param4">4</a> SIGNALFILE</b><pre>                                                   
         Name der Signaldatei ohne Extension (".cnf")                
    ------------------------------</pre><b><a name="param5">5</a> START_SIGNAL</b><pre>                                                 
         Name des zu startenden Signals falls nicht gleich wie P4    
    ------------------------------</pre><b><a name="param6">6</a> CLOCK</b><pre>                                                        
         INT|INTERN / EXTERN: Grundtakt                              
    ------------------------------</pre><b><a name="param7">7</a> OUTPUT</b><pre>                                                       
         ON / OFF: Signal soll am Ausgang anliegen ja/Nein           
    ------------------------------</pre><b><a name="param8">8</a> IMPEDANCE</b><pre>                                                    
         NORM|50 / LOW: Impedanz des Ausgangs                        
    ------------------------------</pre><b><a name="param9">9</a> ATTENUATOR</b><pre>                                                   
         ON / OFF: Abschwaecher ein/aus                              
    ------------------------------</pre><b><a name="param10">10</a> TIEFPASS</b><pre>                                                     
         ON / OFF: Tiefpass ein/aus                                  
    ------------------------------</pre><b><a name="param11">11</a> RUN_MODE</b><pre>                                                     
         SINGLE / LOOP: Signal als 'Single Shot' oder kontinuierlich 
    ------------------------------</pre><b><a name="param12">12</a> RUN_STOP</b><pre>                                                     
         RUN / SYN / STOP / -                                        
         RUN:  Signal sofort starten                                 
         SYN:  Beide Kanaele starten (vorher anderen Kanal mit '-'   
               programmieren)                                        
         STOP: Signal stoppen                                        
         '-':  nur Signal programmieren (spaeter mit SYN starten)    
    ------------------------------</pre><b><a name="param13">13</a> IN_TR_MODE</b><pre>                                                   
         SOF|SOFTWARE/FRONT/TTL/NONE/FREE                            
    ------------------------------</pre><b><a name="param14">14</a> IN_TTL_TR</b><pre>                                                    
         OFF/0/1/2/3/4/5/6/7                                         
    ------------------------------</pre><b><a name="param15">15</a> IN_TR_ART</b><pre>                                                    
         OFF/EDGE/LEVEL                                              
    ------------------------------</pre><b><a name="param16">16</a> IN_TR_FLAN</b><pre>                                                   
         OFF/POS/NEG                                                 
    ------------------------------</pre><b><a name="param17">17</a> OU_TR_MODE</b><pre>                                                   
         OFF/MARKER/FRONT                                            
    ------------------------------</pre><b><a name="param18">18</a> OU_TTL_TR</b><pre>                                                    
         OFF/0/1/2/3/4/5/6/7                                         
    ------------------------------</pre><b><a name="param19">19</a> FREQ_PREC</b><pre>                                                    
         Maximal erlaubte Frequenzabweichung in Promille, sonst      
         Fehlermeldung                                               
    ------------------------------</pre><b><a name="param20">20</a> AMPL_PREC</b><pre>                                                    
         Maximal erlaubte Amplitudenabweichung in Promille, sonst    
         Fehlermeldung                                               
    ------------------------------                                   
                                                                     
                                                                     
 Input:                                                              
 shm_stringpointer *zeilen_wert - hierueber erhaelt die Funktion     
                                  den Zugriff auf den tatsaechl.     
                                  Inhalt, naemlich den Wert,         
                                  in der Parameterzeile;             
 long        index_oePrfL - die Positionsangabe der Parameter im     
                            Parameterarray des SHM;                  
 long        anzahl - die Anzahl der fuer dieses Modul               
                      relevanten Parameter;                          
                                                                     
 Output: none                                                        
                                                                     
 ----------------------------------------------------------          
 Return Value:                                                       
    = 0:   normaler Durchlauf oder der Schrittbetrieb ist            
           aktiviert und die Pruefschrittnummer ungleich 1;          
    = -1:  die Funktion "msg_send_wait" meldete einen Fehler,        
           der auf ein Kommunikationsproblem oder einen Timeout      
           hindeutet;                                                
           die Interprozess-Kommunikation zum AWG-Prozess wurde      
           mit einer Fehlermeldung beendet;                          
                                                                     
 ----------------------------------------------------------          
 Beispiel (optional):                                                
                                                                     
 ----------------------------------------------------------          
</PRE>
</BODY>
</HTML>
